<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <!--
  Copyright (c) 2010 The Native Client Authors. All rights reserved.
  Use of this source code is governed by a BSD-style license that can be
  found in the LICENSE file.
  -->
  <head>
    <title>Jump'n'Bump NativeClient demo</title>
    <script type="text/javascript">
      function moduleDidLoad() {
      }

      function pageDidUnload() {
      }

      function zzz(event, press) {
      var key;
      var keychar;

      if (window.event)
        key = window.event.keyCode;
      else if (e)
        key = e.which;
      else
        return true;
      keychar = String.fromCharCode(key);
      keychar = keychar.toLowerCase();
      if (pi_generator) {
      pi_generator.key_event(key, press);
      }
      return true;
      }

      function zzz_press(event) {
      return zzz(event, 1);
      }

      function zzz_release(event) {
      return zzz(event, 0);
      }
    </script>
  </head>
    <body id="bodyId" onunload="pageDidUnload()" onkeydown="return zzz_press(event)" onkeyup="return zzz_release(event)">
    <h1>Jump'n'Bump NativeClient demo</h1>
    <p>
      This is a Native Client port of an awesome game. Bunnies are controlled with WASD, arrows and mouse buttons. The fourth one is unavailable.
      <p>
      You need Chrome with --enable-nacl option for this to work.
      Sources are <a href=http://github.com/eugenis/jumpnbump-nacl>here</a> and <a href=http://github.com/eugenis/sdl-nacl>here</a>.
    </p>
    <!-- For development, use a #develop location, which loads the develop
    version of the module.
    -->
    <div id="nacl_pi_generator_content"></div>
    <script type="text/javascript">
      contentDiv = document.getElementById('nacl_pi_generator_content');
      if (window.location.hash == '#develop') {
        // Load the develop version of the module.
        contentDiv.innerHTML = '<embed name="nacl_module" '
                               + 'id="pi_generator" '
                               + 'width=400 height=256 '
                               + 'type="pepper-application/pi-generator" '
                               + 'dimensions="2" />';
        moduleDidLoad();
      } else {
        // Load the published .nexe.  This includes the 'nexes' attribute which
        // shows how to load multi-architecture modules.  Each entry in the
        // table is a key-value pair: the key is the runtime ('x86-32',
        // 'x86-64', etc.); the value is a URL for the desired NaCl module.
        var nexes = 'x86-32: jumpnbump_x86_64.nexe\n'
                    + 'x86-64: jumpnbump_x86_64.nexe\n'
                    + 'ARM: jumpnbump_x86_64.nexe ';
        contentDiv.innerHTML = '<embed name="nacl_module" '
                               + 'id="pi_generator" '
                               + 'width=400 height=256 '
                            // + 'nexes="' + nexes + '" '
                               + 'type="application/x-nacl-srpc" '
                               + 'dimensions="2" '
                               + 'onload=moduleDidLoad(); />';
        // Note: this code is here to work around a bug in Chromium build
        // #47357.  See also
        // http://code.google.com/p/nativeclient/issues/detail?id=500
        document.getElementById('pi_generator').nexes = nexes;
      }
    </script>
    <br />
  </body>
</HTML>
